<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="./css/favicon.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yoga SEWA | Contact</title>
    <link rel="stylesheet" href="./css/uds.css">
    <link rel="stylesheet" href="./css/normalize.css">
    <!-- UIkit CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.14.3/dist/css/uikit.min.css"/>
    <!-- UIkit JS -->
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.14.3/dist/js/uikit.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uikit@3.14.3/dist/js/uikit-icons.min.js"></script>
</head>
<body>
    <!-- Navbar -->
    <nav class="uk-navbar-container uk-margin" uk-navbar>
        <a class="uk-navbar-item uk-logo" href="/index.html">Yoga SEWA</a>
        <div class="uk-navbar-right">
            <ul class="uk-navbar-nav">
                <li class="uk-visible@s">
                    <a href="./index.html"><span class="uk-icon uk-margin-small-right" uk-icon="home"></span>Home</a>
                </li>
                <li class="uk-visible@s">
                    <a href="./about.html"><span class="uk-icon uk-margin-small-right" uk-icon="info"></span>About
                        Us</a>
                </li>
                <li class="uk-active uk-visible@s">
                    <a href="./contact.html"><span class="uk-icon uk-margin-small-right"
                            uk-icon="mail"></span>Contact</a>
                </li>
                <li class="uk-active">
                    <a class="uk-navbar-toggle uk-hidden@s uk-active" href="#offcanvas-nav" uk-toggle><span
                            class="uk-icon" uk-icon="menu"></span>Menu
                    </a>
                </li>
            </ul>
        </div>
    </nav>
    <!-- Offcanvas Navbar -->
    <div id="offcanvas-nav" uk-offcanvas="overlay: true mode: reveal">
        <div class="uk-offcanvas-bar">
            <button class="uk-offcanvas-close" type="button" uk-close></button>
            <p class="uk-logo uk-flex-center">Menu</p>
            <ul class="uk-nav uk-nav-default">
                <li><a href="./index.html"><span class="uk-icon uk-margin-small-right" uk-icon="home"></span>Home</a>
                </li>
                <li><a href="./about.html"><span class="uk-icon uk-margin-small-right" uk-icon="info"></span>About
                        Us</a>
                </li>
                <li class="uk-active"><a href="./contact.html"><span class="uk-icon uk-margin-small-right"
                            uk-icon="mail"></span>Contact</a></li>
            </ul>
        </div>
    </div>
    <!-- Contact Form -->
    <main class="uk-container">
        <h1 class="uk-text-large uk-text-center">Contact Us</h1>
        <p id="contact-form-status" class="uk-text-danger uk-text-small uk-text-center"></p>
        <form id="contact-form" class="uk-form-stacked" action="https://formspree.io/f/xknenzpa" method="POST">
            <input type="text" name="_honey" style="display: none;" hidden>
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_next" value="https://yoga-sewa.github.io/success.html">
            <label class="uk-form-label"><b>Name</b></label>
            <input class="uk-input" type="text" name="name" placeholder="Your Name" required>
            <br><br>
            <label class="uk-form-label"><b>Email</b></label>
            <input class="uk-input" type="email" name="mail" placeholder="Your Email" required>
            <br><br>
            <label class="uk-form-label"><b>Message</b></label>
            <textarea class="uk-textarea" name="message" rows="4" style="resize: none;"
                placeholder="Your Message Here"></textarea>
            <br><br>
            <button class="uk-button uk-button-primary uk-width-1">Send Email</button>
        </form>
    </main>
    <script>
        var form = document.getElementById("contact-form");

        async function handleSubmit(event) {
            event.preventDefault();
            var status = document.getElementById("contact-form-status");
            var data = new FormData(event.target);
            fetch(event.target.action, {
                method: form.method,
                body: data,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    status.innerHTML = "Submitted successfully!";
                    status.classList.remove('uk-text-danger');
                    status.classList.add('uk-text-success');
                    window.location.reload();
                } else {
                    response.json().then(data => {
                        if (Object.hasOwn(data, 'errors')) {
                            status.innerHTML = data["errors"].map(error => error["message"]).join(", ")
                        } else {
                            status.innerHTML = "Oops! Try Again!";
                            status.classList.add('uk-text-danger');
                            status.classList.remove('uk-text-success');
                            window.location.reload();
                        }
                    })
                }
            }).catch(error => {
                status.innerHTML = "Oops! Try Again!";
                status.classList.add('uk-text-danger');
                status.classList.remove('uk-text-success');
                window.location.reload();
            });
        }
        form.addEventListener("submit", handleSubmit);
    </script>
</body>
</html>